#!/usr/bin/env node

var
estatico = require('../index'),
program = require('commander'),
chalk = require('chalk')


program.version(require('../package.json').version)



program
	.command('serve [env]')
	.description('Serves application using current dir')
	.action(function(env, opts){

		var app = new estatico.App(process.cwd(), env)


		console.log('Building site...')

		app.build()
			.then(function(){ 

				console.log('Site successfully built to ' + chalk.green(app.dir('destination')))

				app.serve()
				
				console.log('Site running at ' + chalk.green('url'))
			})

		// app.serve()
	})



/**
 * Parse.
 */
program.parse(process.argv)



// Shows help by default
if (!process.argv.slice(2).length) {
  program.outputHelp();
}

